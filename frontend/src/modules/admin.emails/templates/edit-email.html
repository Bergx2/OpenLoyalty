<box-loader loading="EmailsCtrl.loaderStates.coverLoader" cover="1" class="cover" delay="1000"></box-loader>

<div class="heading" ng-init="EmailsCtrl.getEmailsData()">
    <h1>{{ "admin.emails.edit_heading" | translate }} {{ }}</h1>
    <div class="action-buttons">
        <button class="button button-primary medium button-septenary-colorized" ng-click="EmailsCtrl.previewEmail(editableFields.entity.subject, editableFields.entity.content)">{{
            "admin.emails.preview" | translate }}
        </button>
    </div>
</div>

<div style="clear:both;"></div>
<form novalidate ng-submit="EmailsCtrl.editEmails(editableFields)">
    <div class="box-content">
        <div class="row">
            <div class="columns medium-12">
                <fieldset class="fieldset">
                    <div class="row">
                        <div class="medium-2 small-3 columns">
                            <label>{{ "admin.emails.subject" | translate }} <span class="required">*</span></label>
                        </div>
                        <div class="medium-10 small-9 columns">
                            <input type="text" ng-model="editableFields.entity.subject" required>
                            <span class="prompt">{{ "admin.emails.prompt" | translate }}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="medium-2 small-3 columns">
                            <label>{{ "admin.emails.sender_name" | translate }} <span class="required">*</span></label>
                        </div>
                        <div class="medium-10 small-9 columns">
                            <input type="text" ng-model="editableFields.entity.sender_name" required>
                            <span class="prompt">{{ "admin.emails.prompt" | translate }}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="medium-2 small-3 columns">
                            <label>{{ "admin.emails.sender_email" | translate }} <span class="required">*</span></label>
                        </div>
                        <div class="medium-10 small-9 columns">
                            <input type="text" ng-model="editableFields.entity.sender_email" required>
                            <span class="prompt">{{ "admin.emails.prompt" | translate }}</span>
                        </div>
                    </div>
                    <div class="row" ng-if="editableFields.entity.key === 'OpenLoyaltyUserBundle:email:reward_redeemed.html.twig'">
                        <div class="medium-2 small-3 columns">
                            <label>{{ "admin.emails.receiver_email" | translate }} <span class="required">*</span></label>
                        </div>
                        <div class="medium-10 small-9 columns">
                            <input type="text" ng-model="editableFields.entity.receiver_email" required>
                            <span class="prompt">{{ "admin.emails.prompt" | translate }}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="medium-2 small-3 columns">
                            <label>{{ "admin.emails.variables" | translate }} <span class="required">*</span></label>
                        </div>
                        <div class="medium-10 small-9 columns vars">
                            <span ng-repeat="variable in editableFields.additional.variables">{{ <span ng-bind="variable"></span> }}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="medium-2 small-3 columns">
                            <label>{{ "admin.emails.content" | translate }} <span
                                    class="required">*</span></label>
                        </div>
                        <div class="medium-10 small-9 columns">
                            <div  ace-editor ng-model="editableFields.entity.content" style="max-width: 700px; height: 400px; border: 1px solid#e4e4e4;"></div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    <div class="box-footer">
        <div class="row">
            <div class="columns small-12">
                <button class="button  button-septenary-colorized float-left m-r-1" type="submit">
                    {{ "global.save" | translate}}
                </button>
                <button type="button" ui-sref="admin.emails"
                        class="button  button-quaternary float-left">
                    {{ "global.cancel" | translate }}
                </button>
            </div>
            <div style="clear:both;"></div>
        </div>
    </div>
</form>
